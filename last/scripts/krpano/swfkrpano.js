/*
	krpano Embedding Script
	krpano 1.16.3 (build 2013-05-06)
*/
function createPanoViewer(e){function st(e){return(""+e).toLowerCase()}function ot(e,t){return e[d](t)>=0}function ut(){var t,r,i,s,o,u,a=n.location;a=a.search||a.hash;if(a){t=a[z](1)[F]("&");for(r=0;r<t[x];r++)i=t[r],s=i[d]("="),s==-1&&(s=i[x]),o=i[z](0,s),u=i[z](s+1),o==O||st(o)==A?e[A]=u:e[Z](o,u)}}function at(e){return e[D]=ut,e}function ft(){var f,l,c,v,m,g,y;if(s==h){function b(){var e,n,i,s,o,u,a;if(t[G]){e=t[G]["Shockwave Flash"];if(typeof e=="object"){n=e.description;if(n){i=p,t[M]&&(s=t[M]["application/x-shockwave-flash"],s&&(s.enabledPlugin||(i=h)));if(i){o=n[F](" ");for(u=0;u<o[x];++u){a=parseFloat(o[u]);if(isNaN(a))continue;return a}}}}}if(r.ActiveXObject)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e){n=e.GetVariable("$version");if(n)return parseFloat(n[F](" ")[1][F](",").join("."))}}catch(f){}return 0}function E(){var e,t,i=h,s=n[k]("div");for(e=0;e<5;e++)if(typeof s.style[["p","msP","MozP","WebkitP","OP"][e]+"erspective"]!=W){i=p,e==3&&r[rt]&&(t=r[rt]("(-webkit-transform-3d)"),t&&(i=t.matches==p));break}return i}function S(){var e,t,r=w,i=h;try{e=n[k]("canvas");for(t=0;t<4;t++){r=e.getContext(["webgl","experimental-webgl","moz-webgl","webkit-3d"][t]);if(r)break}r&&(i=p)}catch(s){}return r=w,e=w,i}e.isDevice("iphone|ipad|ipod")?a=p:(u=b(),u>=10.1&&(o=p),f=E(),l=S(),f?(c=st(t.platform),v=0,m=0,g=0,y=i[d]("firefox/"),y<0&&(y=i[d]("gecko/")),y>=0&&(v=parseInt(i[R](1+i[d]("/",y)),10)),y=i[d](J),y>0&&(m=parseInt(i[R](y+8),10)),y=i[d]("chrome"),y>0&&(g=parseInt(i[R](y+7),10)),l||(c[d](K)<0&&v>3&&m<1&&(f=h),g>9&&g<20&&(f=h)),v>3&&v<18&&m>1&&(f=h),a=f):l&&(a=p)),s=p}}var t,n,r,i,s,o,u,a,f,l,c,h=!1,p=!0,d="indexOf",v="addEventListener",m="externalMouseEvent",g="target",y="wmode",b="targetelement",w=null,E="enable_mousewheel_js_bugfix",S="onerror",x="length",T="getElementById",N="bgcolor",C="onmousewheel",k="createElement",L="flashbasepath",A="html5",O="useHTML5",M="mimeTypes",_="params",D="passQueryParameters",P="externalMouseEvent2",H="always",B="consolelog",j="srcElement",F="split",I="never",q="onready",R="slice",U="xml",z="substring",W="undefined",X="mwheel",V="basepath",$="vars",J="android",K="mac",Q="stopPropagation",G="plugins",Y="preventDefault",Z="addVariable",et="lastIndexOf",tt="wheelDelta",nt="height",rt="matchMedia",it="100%";return t=navigator,n=document,r=window,i=st(t.userAgent),s=h,o=h,u=0,a=h,e||(e={}),f=e[D]===p,e.swf||(e.swf="krpano.swf"),e[U]===undefined&&(e[U]=e.swf[F](".swf").join(".xml")),e.id||(e.id="krpanoSWFObject"),e.width||(e.width=it),e[nt]||(e[nt]=it),e[N]||(e[N]="#000000"),e[y]||(e[y]=w),e[g]||(e[g]=w),e[A]||(e[A]="auto"),e[X]===undefined&&(e[X]=p),e[$]||(e[$]=[]),e[_]||(e[_]=[]),e[q]||(e[q]=w),e[V]?e[L]=e[V]:(l="./",c=e.swf[et]("/"),c>=0&&(l=e.swf[R](0,c+1)),e[V]=l),e.isDevice=function(e){var t,n,r,s="all",o=["ipad","iphone","ipod",J];for(t in o)i[d](o[t])>=0&&(s+="|"+o[t]);e=st(e)[F]("|");if(e==w)return p;n=e[x];for(t=0;t<n;t++){r=e[t];if(s[d](r)>=0)return p}return h},e[Z]=function(t,n){t=st(t),t=="pano"||t==U?e[U]=n:e[$][t]=n},e.addParam=function(t,n){e[_][st(t)]=n},e[O]!==undefined&&(e[A]=e[O]),e[O]=function(t){e[A]=t},e.isHTML5possible=function(){return ft(),a},e.isFlashpossible=function(){return ft(),o},e[S]||(e[S]=function(t){var n=e[b];n?n.innerHTML='<table width="100%" height="100%"><tr valign="middle"><td><center>ERROR:<br/><br/>'+t+"<br/><br/></center></td></tr></table>":alert("ERROR: "+t)}),e.embed=function(s){var l,c,O,D,F,z,V,J;s&&(e[g]=s),e[b]=n[T](e[g]);if(!e[b])e[S]("No Embedding Target");else{f&&ut(),e[X]==h&&(e[$]["control.disablewheel"]=p),e[B]&&(e[$][B]=e[B]),ft(),l=st(e[A]),c=o,O=a,l==I?O=h:ot(l,"only")&&(c=h),ot(l,H)?(o=c=h,a=O=p):O&&(l=="whenpossible"||ot(l,"prefer"))&&(c=h);if(c&&o){function Z(e){function k(e){function a(){r[v]?(r[v]("DOMMouseScroll",c,h),r[v]("mousewheel",c,h),n[v]("mousedown",f,h),n[v]("mouseup",l,h)):(r.opera?r.attachEvent(C,c):r[C]=n[C]=c,n.onmousedown=f,n.onmouseup=l)}function f(e){e||(e=r.event,e[g]=e[j]),u=e?e[g]:w}function l(e){var t,i,s,a,f,l,c,d;e||(e=r.event,e[g]=e[j]),t=0,i=o[x];for(t=0;t<i;t++){s=o[t];if(s){a=n[s.id];if(a&&s.needfix){f=a.getBoundingClientRect(),l=a==e[g],c=a==u,d=e.clientX>=f.left&&e.clientX<f.right&&e.clientY>=f.top&&e.clientY<f.bottom;if((l||c)&&d==h)try{a[P]&&a[P](0,"mouseUp")}catch(v){}}}}return p}function c(t){var i,u,a,f,l,c;t||(t=r.event,t[g]=t[j]),i=0,u=h,t[tt]?(i=t[tt]/120,r.opera&&s&&(i/=4/3)):t.detail&&(i=-t.detail,s==h&&(i/=3));if(i){a=0,f=o[x];for(a=0;a<f;a++){l=o[a];if(l){c=n[l.id];if(c&&c==t[g]){try{c.jswheel?c.jswheel(i):c[m]?c[m](i):c[E]&&(c[E](),c[m]&&c[m](i))}catch(d){}u=p;break}}}}e[X]==h&&(u=h);if(u)return t[Q]&&t[Q](),t[Y]&&t[Y](),t.cancelBubble=p,t.cancel=p,t.returnValue=h,h}var i,s=st(t.appVersion)[d](K)>=0,o=r._krpMW,u=w;o||(o=r._krpMW=new Array,a()),i=e[y],o.push({id:e.id,needfix:s||!!r.chrome||i=="opaque"||i=="transparent"})}var i,s,o,u,a,f="",l=e[$],c=e[_],S=e.id;for(;;){s=n[T](S);if(!s)break;S+=String.fromCharCode(48+Math.floor(9*Math.random())),e.id=S}e[y]&&(c[y]=e[y]),e[N]&&(c[N]=e[N]),e[U]!==undefined&&(l[U]=e[U]),e[y]=st(c[y]),c.allowfullscreen="true",c.allowscriptaccess=H;for(i in l)f!=""&&(f+="&"),f+=encodeURIComponent(i)+"="+encodeURIComponent(l[i]);c.flashvars=f,e[L]&&(c.base=e[L]),o="",u=' id="'+S+'" width="'+e.width+'" height="'+e[nt]+'" style="outline:none;" ',a="_krpcb_"+S,!e[q]||(r[a]=function(){try{delete r[a]}catch(t){r[a]=w}e[q](n[T](S))});if(t[G]&&t[M]&&t[M][x]){o='<embed name="'+S+'"'+u+'type="application/x-shockwave-flash" src="'+e.swf+'" ';for(i in c)o+=i+'="'+c[i]+'" ';o+=" />"}else{o="<object"+u+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+e.swf+'" />';for(i in c)o+='<param name="'+i+'" value="'+c[i]+'" />';o+="</object>"}e[b].innerHTML=o,k(e)}u>=11.4&&(D=p,st(t.platform)[d](K)>=0&&st(t.vendor)[d]("apple")>=0&&(F=i[d]("webkit/"),F>0&&(F=parseFloat(i[R](F+7)),!isNaN(F)&&F>0&&F<534&&(D=h))),D&&e[y]==w&&!e[_][y]&&(e[y]="direct")),Z(e)}else if(O&&a){function rt(t){function d(e,t,r){var i,s=n.getElementsByTagName("head");s&&(s=s[0]),s||(s=n.body),s?(i=n[k]("script"),i.type="text/javascript",i.async=p,i.onload=t,i[S]=r,i.src=f+e,s.appendChild(i)):r()}function v(){return typeof krpanoJS!==W}function m(){return!!r.krpanoreg&&!!r.krpanokey}function y(){s=p,b()}function b(){i==h&&(m()||s)&&v()&&(i=p,e[$][U]=e[U],e[_]=e,e.htmltarget=e[g],krpanojs_init(t))}function w(){t[S]("HTML5 Version not available!")}var i,s,o,u="krpanoiphone.js",a="krpanoiphone.license.js",f="./",l=t.swf,c=l[et]("/");c>=0&&(f=l[R](0,c+1)),i=h,s=h,o=m()|0|(v()|0)<<1,o==0?(d(a,b,y),d(u,b,w)):o==1?d(u,b,w):o==2?y():b()}rt(e)}else z="",V=l!=I,J=o==h&&(l==I||!ot(l,H)&&!ot(l,"only")),J&&(z+="Adobe Flashplayer 10.1 (or higher)"),J&&V&&(z+=" or a<br/>"),V&&(z+="HTML5 Browser with CSS 3D Transforms or WebGL support"),J&&V&&(z+=" are"),z+=" required!",e[S](z)}},at(e)}function removepano(e){var t,n,r,i,s=document.getElementById(e);if(s){t=window._krpMW;if(t)for(n=0;n<t.length;n++){r=t[n];if(r&&r.id===e){t.splice(n,1);break}}s.unload&&s.unload(),i=s.parentNode,i&&i.removeChild(s)}}function embedpano(e){createPanoViewer(e).embed()}function createswf(e,t,n,r,i){return createPanoViewer({swf:e,id:t,width:n,height:r,bgcolor:i})}function createkrpanoJSviewer(e,t,n){return createPanoViewer({id:e,width:t,height:n,html5:"always"})}var embedPanoViewer,createkrpanoSWFviewer;embedPanoViewer=embedpano,createkrpanoSWFviewer=createswf;
